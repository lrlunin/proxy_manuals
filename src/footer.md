# Как проверить правильно ли работает прокси

Чтобы удостовериться всё ли мы настроили правильно достаточно посетить два сайта.

Открываем сайт [2ip.ru](https://2ip.ru). Здесь мы должны увидеть вашего российского провайдера. Это значит что настройку для зоны `.ru` мы сделали правильно.

Затем заходим на сайт [whatismyip.com](https://www.whatismyip.com/). Здесь вы должны увидеть другой адрес, отличный от адреса вашего провайдера. Это значит, что для зарубежных сайтов обход работает успешоно.

Если что-то не так, напишите мне. Мы разберемся в вопросе и добавим его в эту инструкцию. 

# Общие FAQ (ЧаВо) {#faq}

*В процессе написания...*

Вопрос: Как вообще работают эти блокировки?

Ответ: У крупных провайдеров начиная с принятия пакета Яровой установлены специальные коробочки (по типу роутеров, далее *ТСПУ*) в которые втекает весь траффик от пользователей, анализируется и отфильтровывается, а потом идёт далее в интернет. По всей России у всех провайдеров установлены различные версии данного оборудования с различными версиями прошивок. Также тестируются разные правила блокировок в разных местах РФ, поэтому блокировки имеют такой неоднородный характер для разных провайдеров в разных частях страны.

Примерно работают они так:
```{.mermaid width=30% format=svg}
sequenceDiagram
    Title: Без ТСПУ
    actor Пользователь
    Пользователь->>Сайт: Хочу сайт youtube.com по адресу 113.124.2.45
    Сайт-->>Пользователь: Получите!
```
```{.mermaid width=30% format=svg}
sequenceDiagram
    Title: С ТСПУ
    actor Пользователь
    Пользователь->>ТСПУ: Хочу сайт kremlin.ru по адресу 110.124.23.45
    ТСПУ->>Сайт: Отличный сайт, пропускаем!
    Сайт-->>Пользователь: Получите!
    Пользователь->>ТСПУ: Хочу сайт youtube.com по адресу 113.124.2.45
    ТСПУ->>ТСПУ: Домен youtube.com в бане!
    ТСПУ-->>Пользователь: Конец соединения!
```

Вопрос: Зачем такие усложнения с какими-то странными программами? Есть же OpenVPN, Wireguard, Cloack. Отлично работают!

Ответ: 

Вопрос: В чём разница между GoodbyeDPI, и прокси, и VPNом.

Ответ:

Вопрос: Почему раньше YouTube работал с GoodbyeDPI, а теперь нет. 

Ответ:  В каждом пакете, который устройство отправляет в интернет есть заголовки с указанием, куда этот пакет надо доставить. Так как на одном IP адресе может находиться не один сайт, то в пакете помимо IP-адреса также содержится доменное имя. Некоторые сайты РКН блокирует только по доменным имени, но не сам IP адрес.

Так было в начале с блокировкой YouTube. Блокировали исключительно поддомены сайта `googlevideo.com`, вероятно опасались зацепить другие важные сервисы Google или не знали полный список адресов, где находятся эти сайты. Теперь же РКН примерно выяснил эти списки и заблокировал доступ конкретно к IP адресам.

# Источники (вероятно недоступные без прокси)
::: {#refs}
:::